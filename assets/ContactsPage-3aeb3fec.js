import{j as e,u as w,s as c,i as N,L,C as x,o as k,t as E,a as W,b as o,c as S,d as A,e as D,r as g,f as G,g as i,h as R,k as q,l as z,m as b,n as $,p as I}from"./index-46be6328.js";const M="_wrapper_1e5wq_1",O="_text_1e5wq_8",_={wrapper:M,text:O},U=({contacts:t})=>{const r=t.reduce((s,a)=>(a.favorite&&(s.favorite+=1),a.priority&&(s.priority+=1),s),{priority:0,favorite:0});return e.jsxs("div",{className:_.wrapper,children:[e.jsxs("p",{className:_.text,children:["Total: ",t.length]}),e.jsxs("p",{className:_.text,children:["Priority: ",r.priority]}),e.jsxs("p",{className:_.text,children:["Favorite: ",r.favorite]})]})},H=({id:t,name:r,phone:s,favorite:a,priority:l})=>{const p=w(),m=()=>{p(E({id:t,favorite:!a}))},u=()=>{p(W({id:t,priority:!l}))};return e.jsxs("div",{className:c.cardContainer,children:[e.jsxs("div",{className:c.iconsWrapper,children:[e.jsx("button",{onClick:m,type:"button","aria-label":"Toggle favorite",children:e.jsx("svg",{className:`${c.like} ${a?c.likeActive:""}`,children:e.jsx("use",{href:`${N}#icon-heart`})})}),e.jsx("button",{onClick:u,type:"button","aria-label":"Toggle checkbox",children:e.jsx("svg",{className:`${c.checkbox} ${l?c.checked:""}`,children:e.jsx("use",{href:`${N}#icon-checkbox`})})})]}),e.jsxs(L,{to:`/contacts/${t}`,className:c.cardInfoWrapper,children:[e.jsx("div",{className:c.cardTitle,children:r}),e.jsx("div",{className:c.cardInfo,children:s})]}),e.jsxs("div",{className:c.cardActions,children:[e.jsx(x,{onClick:()=>p(k({type:"edit",props:{id:t}})),variant:"primary",children:"Edit"}),e.jsx(x,{variant:"secondary",onClick:()=>p(k({type:"confirmDelete",props:{id:t,name:r,phone:s}})),children:"Delete"})]})]})},P=t=>t.filters.status,B=t=>t.filters.name,T=t=>t.filters.phone,J="_cardsGrid_1tzp1_1",K={cardsGrid:J},Q=()=>{const t=w(),r=o(S),s=o(A),a=o(D),l=o(P),p=o(B),m=o(T);g.useEffect(()=>{t(G())},[t]);const u=n=>n.replace(/[\s\-()]/g,""),y=r.filter(n=>{const j=n.name.toLowerCase().includes(p.toLowerCase()),v=u(n.phone).includes(u(m)),d=l===i.total||l===i.favorite&&n.favorite||l===i.priority&&n.priority;return j&&v&&d});return s?e.jsx("p",{children:"Loading..."}):a?e.jsxs("p",{children:["Error: ",a]}):e.jsx("div",{className:K.cardsGrid,children:y.map(n=>e.jsx(H,{...n},n.id))})},V="_text_1yjp7_1",X="_primary_1yjp7_7",Y="_secondary_1yjp7_11",Z="_error_1yjp7_15",F={text:V,primary:X,secondary:Y,error:Z},ee=({children:t,variant:r="primary",className:s=""})=>e.jsx("span",{className:`${F.text} ${F[r]} ${s}`,children:t}),te="_wrapper_1k2vx_1",se="_title_1k2vx_8",re="_buttons_1k2vx_14",ae="_primary_1k2vx_21",f={wrapper:te,title:se,buttons:re,primary:ae},ne=()=>{const t=R(),r=q(a=>a.filters.status),s=a=>{t(z(a))};return e.jsxs("div",{className:f.wrapper,children:[e.jsx("h2",{className:f.title,children:"Filter by status"}),e.jsxs("div",{className:f.buttons,children:[e.jsx(x,{selected:r===i.total,onClick:()=>s(i.total),style:{width:64,whiteSpace:"nowrap"},children:"Total"}),e.jsx(x,{selected:r===i.favorite,onClick:()=>s(i.favorite),style:{width:64,whiteSpace:"nowrap"},children:"Favorite"}),e.jsx(x,{selected:r===i.priority,onClick:()=>s(i.priority),style:{width:64,whiteSpace:"nowrap"},children:"Priority"})]})]})},ce="_wrapper_vcnih_1",oe="_inputWrapper_vcnih_9",ie="_input_vcnih_9",le="_clearBtn_vcnih_24",h={wrapper:ce,inputWrapper:oe,input:ie,clearBtn:le},pe=()=>{const t=w(),r=o(B),s=o(T),a=o(P),[l,p]=g.useState(!1);g.useEffect(()=>{const d=setTimeout(()=>p(!0),100);return()=>clearTimeout(d)},[]);const m=d=>{t(b(d.target.value))},u=d=>{t($(d.target.value))},y=()=>t(b("")),n=()=>t($("")),j=()=>{t(I())},v=r!==""||s!==""||a!==i.total;return e.jsxs("div",{className:h.wrapper,children:[e.jsxs("div",{className:h.inputWrapper,children:[e.jsx("input",{type:"text",placeholder:"Search by name",value:r,onChange:m,className:h.input,autoComplete:"off"}),r&&e.jsx("button",{type:"button",className:h.clearBtn,onClick:y,children:"×"})]}),e.jsxs("div",{className:h.inputWrapper,children:[e.jsx("input",{type:"text",placeholder:"Search by phone",value:s,onChange:u,className:h.input,autoComplete:"off",readOnly:!l}),s&&e.jsx("button",{type:"button",className:h.clearBtn,onClick:n,children:"×"})]}),v&&e.jsx(x,{variant:"secondary",onClick:j,style:{width:"auto",whiteSpace:"nowrap"},children:"Reset all"})]})},de="_wrapper_r7g8r_1",he="_topBar_r7g8r_8",ue="_line_r7g8r_15",C={wrapper:de,topBar:he,line:ue};function me(){const t=o(S);return e.jsxs("div",{className:C.wrapper,children:[e.jsxs("div",{className:C.topBar,children:[e.jsx(U,{contacts:t}),e.jsx(pe,{}),e.jsx(ne,{}),e.jsx("hr",{className:C.line})]}),e.jsx(ee,{children:"Contact List"}),e.jsx(Q,{})]})}export{me as default};
